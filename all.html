<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
  
  Fuuko's Lab
  
  </title>
  <meta content="Fuuko's Lab" property="og:description">
  <meta content="Fuuko's Lab" property="og:title">
  <meta content="Fuuko's Lab" property="og:site_name">
  <meta content="https://fuuko.net/hitode.png" property="og:image">
  
  
  <link href="atom.xml" rel="alternate" title="Fuuko's Lab" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link rel="icon" href="https://fuuko.net/hitode.png">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:fuuko.net ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="https://fuuko.net/tracker.html">Tracker</a></li>
        
        <li id=""><a target="_self" href="https://fuuko.net/status.html">Status</a></li>
        
        <li id=""><a target="_self" href="https://photo.fuuko.net/">Photos</a></li>
        
        <li id=""><a target="_self" href="about.html">About me</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://www.bing.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; Fuuko's Lab</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

        
            <li><a href="Material.html">Material</a></li>
        
            <li><a href="Network.html">Network</a></li>
        
            <li><a href="Offtopics.html">Offtopics</a></li>
        
            <li><a href="Review.html">Review</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="15255378723707.html">
                
                  <h1>AND (Average Network Delay) and Queuing Theory Basics</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Recently I was looking at the Linear programming formulations of Traffic engineering problems and one of the problems is to find the path with the goal to minimize the Average network delay. Which got me thinking that for topology design related problems, how can I calculate the Average network delay? As you can guess, I&#39;m going to introduce the model we implemented in Hokkaido research network.  </p>

<h2 id="toc_0">Before starting few things to keep in mind:</h2>

<ul>
<li>A background in Probability theory, particularly familiarity with Poisson and Exponential distribution will help. There is no way I can do the justice in explaining all the basics without distracting from the main goal.</li>
<li>I will involve Queuing theory and the Math involved in Queuing theory gets complicated very fast, especially for an average guy like me. What we are going to look at is the most basic form.</li>
<li>Please be aware that whatever we cover here only allows us to measure the first order approximation of what happens in real life and it is good for use cases like topology design but not for measuring the exact state of a network for operational purposes.</li>
<li>As usual disclaimer, I am going to take some luxuries while explaining to keep things simple, so it‚Äôs possible that some statements may not be mathematically accurate.</li>
</ul>

<!--more-->

<h2 id="toc_1">Factors contributing to Packet Delay:</h2>

<p>There are typically four factors which contribute to a packet delay in a network. Out of the Four factors, queuing delay is the one which is most interesting and most complicated.</p>

<p>Total Delay = <span style="color: #993300">Processing Delay</span> + <span style="color: #0000ff">Transmission Delay</span> + <span style="color: #008000">Propagation Delay</span> +<span style="color: #ff6600"> <strong>Queuing Delay</strong></span></p>

<p>Queuing delay is the time spent by the packet sitting in a queue waiting to be transmitted onto the link. The amount of time it needs to wait depends on the size of the Queue. If the Queue is empty, then it transmitted immediately, but if it‚Äôs sitting behind other packets, then it needs to wait for the packets in front to be transmitted first (common sense).  </p>

<p>In order to understand more about Queueing delay, we have to take a step back and look at the basic of Queuing theory first. Then we will look at the simple Queueing model, derivation and then see how we can use that to calculate the Average Network delay.  </p>

<h2 id="toc_2">What is Queuing Theory?</h2>

<p>Queuing theory is basically the mathematical study of waiting lines. We see Queues everyday in our life, whether it‚Äôs a line in Starbucks, queues of vehicles on the road, packets in Data Networks, Grocery line etc.  </p>

<p>Typically, a Queue is formed when people arrive at a place to get some kind of service like getting coffee, grocery, medical help etc. In Queueing theory, we create a model of the Queuing system so that we can predict the performance of the system for parameters like:<br/><br/>
* Average number of customers waiting in a line (Average Queue length).<br/>
* Average time a customer spends waiting in a line.<br/>
* How utilized servers serve the queues.</p>

<p>Queuing theory has been used extensively in Operations Research. As a matter of fact, some of the best lectures I have found on Queuing theory were taught as part of Operations research curriculum.  </p>

<h3 id="toc_3">Components of a Queuing System:</h3>

<p>Below is a representation of various components in a Queueing systems. </p>

<p><img src="media/15255378723707/15255383727178.jpg" alt=""/></p>

<p>At a basic level, a Queuing system consists of one or more Servers serving the customers, One or more Queues in which Customers will come and line-up. The length of these Queues can be assumed infinite or finite length to hold customers waiting for service.  </p>

<ul>
<li>Arrival Process: Represents the Customer arrival pattern. We will look more into the details.</li>
<li>Service Pattern: how many servers we have and the speed of the Service which is called Service Rate.</li>
<li>Queue Length: How many people can a Queuing system hold. 10, 20, 200, infinite?</li>
<li>Queue Discipline: This represents if the queue will be served in First come First serve (FCFS), Last come First Serve (LCFS), Random etc. manner. Typically, it‚Äôs FCFS and that is what we will assume for the rest of the article.</li>
</ul>

<h3 id="toc_4">Customer Arrival Pattern (Arrival Process)</h3>

<p>Customer arrival pattern basically specifies how customers are arriving in the Queuing system. For instance, they can come either in a scheduled manner or they can be totally random. Few parameters we considered here are:</p>

<ul>
<li>Arrival Rate: This represents the average rate at which the customers are coming. For instance, let‚Äôs say we have a grocery store and we know that on an average, there are 5 customers walks into the store every hour. So the Average rate is 5 customers per hour and it is typically represented by Œª(lambda).</li>
<li>Inter-arrival time: This is the time between the customer arrivals.<br/>
<img src="media/15255378723707/15255384988084.jpg" alt=""/><br/>
If we know that the Customers come in a scheduled manner or follow some sort of pattern, then things would be easy. For instance, going back to our grocery store example, let‚Äôs say we are trying to figure out how many cash registers we have to put to handle the customers. We know that on an average 5 customers come every hour and let‚Äôs assume that it takes on an average 10 mins to service a single customer which means our Service Rate is 6 customers per hour.</li>
</ul>

<p>Now If 5 customers walk into the store at a gap of 12 mins each, then there won‚Äôt be any queue formed because by the time next customer comes, you would have serviced the previous customer and life would be just good with a single counter. But unfortunately life is not that simple, they all can just show up at the same time and that will form a Queue. So If your service time is too long then you have the risk of them walking out.      if they wait for too long, the possibility of them to stop waiting/walk away will be higher.</p>

<p>So, this is the reason why we have built some sort of intuition on why we need to study Queues. Now in our scope, we will assume that Customers arrival pattern is Random in nature.</p>

<p>(Similarly, later we will assume that the packet arrival in Networks is also a Random even though it may not be entirely true in reality).</p>

<p>We will model the customer arrival pattern as a Poisson process. If you don‚Äôt know what a Poisson process, I am just going to mention some of the key properties briefly.</p>

<h4 id="toc_5">Poisson Arrival Model:</h4>

<p>A Poisson process is typically used to model scenarios where we are counting the occurrences of certain events that appear to happen at a certain rate, but completely at random. For example, going back to our grocery store example, we know that average customer arrival rate is 5 but we don‚Äôt know when they will show up at the store. Poisson process is perfect to model this kind of behavior.<br/>
<img src="media/15255378723707/15255386155786.jpg" alt=""/><br/>
In Poisson process the rate ‚ÄúŒª‚Äù represents the average number of events per unit time. The Probability of ‚Äún‚Äù arrivals happening in ‚Äút‚Äù units of time can be given by: \[ P_n(t)=\frac{(\lambda t)^n}{n!}e^{-\lambda t} \]</p>

<p>I am not going to derive the above formula, but essentially it can help you in answering questions like, give me the probability of 8 customers arriving in our grocery shop in an hour given that we know on an average 5 customers per hour(Œª=5) walk into the store.</p>

<p>The inter-arrival times of a Poisson process is independent and it follows an <strong>exponential distribution</strong></p>

<p>Again, we are going to skip the proof on how a Poisson process inter arrival times are exponential distribution, but it‚Äôs actually pretty simple (though just by saying that may not really help).</p>

<p>Exponential distribution has one key property which is Memoryless. Meaning the past doesn‚Äôt affect the Future. It‚Äôs also called forgetfulness property and simple examples would be like flipping a Coin. I think I also exhibit symptoms of Memoryless.  </p>

<h2 id="toc_6">Queuing Models Taxonomy:</h2>

<p>So in Queuing theory, we use certain kind of notation (Kendal‚Äôs notation) to refer to various types of Queuing system. The format of the notation is below<br/><br/>
 <strong>A / B / s / K / n / D</strong>  </p>

<ul>
<li>A ‚Äì Arrival Process, Inter arrival times distribution. It can be either of these

<ul>
<li>M = Represents Markovian or Memory less property like Poisson process.</li>
<li>D = deterministic (Constant)</li>
<li>G = General distribution</li>
</ul></li>
<li>B ‚Äì Service distribution. It can be either of these

<ul>
<li>M = Represents Markovian or Memory less property like Exponential service time.</li>
<li>D = deterministic (Constant)</li>
<li>G = General distribution</li>
</ul></li>
<li>s ‚Äì number of servers</li>
<li>K ‚Äì system‚Äôs capacity (e.g. maximum number of customers in the system including the one being served). Typically, we omit this when it‚Äôs infinity.</li>
<li>n ‚Äì population size. Usually we consider Infinity for this.</li>
<li>D ‚Äì Queue Discipline like FIFO, LIFO, Random etc.<br/></li>
</ul>

<p>For the majority, we only use the first three i.e. ‚ÄúA / B / s‚Äù to represent a Queuing system. Below are few Queuing type examples.<br/><br/>
M/M/1: Infinity<br/><br/>
<img src="media/15255378723707/15255389466749.jpg" alt=""/>  </p>

<ul>
<li><strong>Arrival Process</strong>: The First ‚ÄúM‚Äù represents memory less property i.e. Poisson arrival process. The customer arrival rate is represented by Œª.</li>
<li><strong>Service Distribution</strong>: The Second ‚ÄúM‚Äù represents memory less property i.e. exponential service time. The service rate is represented by ‚Äú¬µ‚Äù and the mean of Exponential distribution is given by 1/ ¬µ.</li>
<li><strong>1</strong>: represents the number of server.</li>
<li><strong>Infinity</strong>: Represents that the Queue length can be infinite. Off course we know that in real world this cannot be true.<br/></li>
</ul>

<p><strong>M/M/c: 10</strong><br/><br/>
<img src="media/15255378723707/15255390021410.jpg" alt=""/><br/>
* <strong>Arrival Process</strong>: ‚ÄúM‚Äù represents memory less i.e. Poisson Process<br/>
* <strong>Service Distribution</strong>: ‚ÄúM‚Äù represents memory less i.e. exponential service time<br/>
* <strong>c</strong>: Represents the number of Servers like 2 in our case.<br/>
* <strong>10</strong>: Represents the maximum length of the Queue.  </p>

<p>Other examples of Queuing system could be like M/G/1, M/D/1 etc.  </p>

<p>Out of all the different types of Queuing system, M/M/1 is the simplest Queuing model. We can model the output link of a router as an M/M/1 Queue which is actually what we will do later in the example.<br/><br/>
<img src="media/15255378723707/15255390560022.jpg" alt=""/></p>

<h3 id="toc_7">Properties of a Queuing System:</h3>

<p>At this point we know that in a Queuing system we have Customer Arrival rate (Œª) which tells us how fast the customers are coming in and Service rate (¬µ) which is the average time taken to service each customer. A good Queuing system has a property that service Rate (¬µ) is always greater than the customer arrival Rate (Œª) and the ratio (Œª/¬µ) is represented by ‚ÄúœÅ‚Äù. </p>

<p>\[\rho = \frac{Customer\ Arrival\ Rate(\lambda)}{Service\ Rate}&lt;1\]</p>

<p>I think the reasoning for this is pretty intuitive because if that is not the case, then the Queue will keep growing as customers will arrive faster than a Queue can be served.  </p>

<p>Obviously the next question comes to mind is why we will have a Queue to begin with if Service Rate is higher than the Customer arrival rate? We should know this because we addressed this in our earlier Grocery example i.e. Customer inter-arrival pattern is random.</p>

<p>In the below figure, we have a service rate of 6 per hour and arrival rate of 5 per hour and we will form Queue for bottom two illustrations where customer arrival pattern is random.<br/><br/>
<img src="media/15255378723707/15255391356971.jpg" alt=""/></p>

<p>We also make another important assumption that during a very small interval (let‚Äôs call it ‚Äúh‚Äù), only one event takes place. Let‚Äôs say the current time is ‚Äút‚Äù then in time ‚Äút+h‚Äù, either a customer will arrive in the Queue or a Customer is Served. We cannot have both Customer arrival and Customer getting Served in the same time interval ‚Äúh‚Äù. Essentially ‚Äúh‚Äù is so small that only one thing happens (Arrival or Service).  </p>

<p>Alright, so what kind of questions we can answer with the help of Queuing Theory?</p>

<p>Assuming that the system is in a steady state, we can answer things like what is the probability that a system has 0, 1, 2‚Ä¶‚Ä¶‚Ä¶ to infinity customers, in the Queue? The number of people in the Queue can go either to ‚ÄúInfinity‚Äù or to ‚ÄúN‚Äù where N is the maximum size a Queue can hold depending on the type of Queuing model we are using like M/M/1: Infinity vs M/M/1: n.</p>

<p>Typically, we are interested in getting the value for below parameters for a given Queueing system.<br/>
w = numbers of customers waiting is queue<br/><br/>
q = Total number of customers in the system<br/><br/>
\(T_s\) = Denote the service time.<br/><br/>
\(T_w\) = waiting time in Queue <br/>
\(T_q\) = denote the total turn around time (Waiting time + Service Time) (\(T_q = T_w + T_s\))  </p>

<p><img src="media/15255378723707/15255391737073.jpg" alt=""/>  </p>

<h3 id="toc_8">Basic queuing relationships:</h3>

<p>Little‚Äôs Law gives us below two relationships between the parameters for any steady state queuing system:<br/><br/>
\(q=\lambda T_q\) (equation 1)<br/><br/>
\(w = \lambda T_w\) (equation 2)  </p>

<p><img src="media/15255378723707/15255392254162.jpg" alt=""/></p>

<p>In case it‚Äôs not intuitive to you, think about the basic relationship between Distance, Speed and Time, which we all are familiar with i.e.  </p>

<blockquote>
<p><strong>Distance = Speed x Time</strong>  </p>
</blockquote>

<p>The distance covered is a product of the Speed an object is moving and Time spent. Now assume that the arrival rate (Œª) is the Speed and the waiting time is the time spend. This will give us the length. We are not going to prove Little‚Äôs law, but if you have an interest, the proof is widely available in lots of text books.</p>

<h3 id="toc_9">Relationship between Total Turnaround, Queuing and Service Times</h3>

<p>In a queuing system, a customer‚Äôs time is either spent waiting for service or getting service. Thus, we get this relationship:<br/>
\[T_q = T_w + T_s\]<br/>
Multiplying the above equation by the arrival rate \(\lambda\) and applying Little&#39;s formula, we get<br/>
\[\lambda T_q = \lambda T_w + \lambda T_s \]<br/>
From earlier equation 1 and 2 we know that \(1 = \lambda T/q\) and \(w = \lambda T_w\), so \(q = w+ \lambda T_s\)<br/><br/>
Where \(T_s=\frac{1}{\mu}\ and\ \rho = \frac{\lambda}{\mu } \)<br/><br/>
so we see<br/>
\[q = w+\frac{\lambda}{\mu } \rightarrow w+\rho \]</p>

<h2 id="toc_10">Analysis of an M/M/1 Queuing System</h2>

<p>It‚Äôs time for us to derive some equations. An M/M/1 queuing system is a single-queue single-server queuing system in which arrivals are Poisson and service time is exponential. The notation M/M/1 describes the ‚Äúqueue‚Äù in the system as having a Markovian arrival process (i.e. Poisson) and a Markovian (i.e. Exponential) service discipline with 1 server.</p>

<h3 id="toc_11">Probability of Arrival and Departure</h3>

<p>So as we said earlier, assume a very small time interval of length ‚Äúh‚Äù and in this time interval (h), only one event happens either an arrival or a departure (customer is serviced).</p>

<p>Since the rate of arrival is Œª per unit time, then we can say that rate of arrival per interval ‚Äúh‚Äù is ‚ÄúŒªh‚Äù. To think about this intuitively, let‚Äôs say we have an arrival rate of Œª = 2 per second and h=5 second then arrival rate per 5 second is 10 (5 x 2).</p>

<p>We know that the probability density of the Poisson distribution is:<br/>
\(P_n = (\frac{\lambda^n}{n!}e^{- \lambda})\) where n = 0,1,2 ...  </p>

<p>Given that the rate of arrival per interval h is Œªh, the probability of ‚Äún‚Äù arrivals per interval h can be given as<br/><br/>
\(P_n(h) = (\frac{(\lambda h)^n}{n!}e^{- \lambda h})\) where n = 0,1,2 ...  </p>

<p>According to the above, the probability that there will be no arrivals (n=0) during a given interval h is  thus, the probability that at least one arrival (i.e. a birth) will occur is:<br/>
\[ P(At\ least\  one\ arrival)=1-P(No\ arrivals)\Rightarrow 1-e^{-\lambda h} \Rightarrow 1 - (1- \lambda h + \frac{( \lambda h )^2}{2!}+ \frac{( \lambda h )^3}{3!}) \]</p>

<p>Since we are assuming that ‚Äúh‚Äù is a very small period, we can ignore the higher order terms because they become negligible (intuition: If \(h = 0.001\) then \(h^2 = 0.000001\) which is really small ) which will leave us with  Œªh.</p>

<p>\[P (arrival) = Œªh\]</p>

<p>Similarly, we can show that the probability that a customer will leave the system (i.e. a customer for whom the service was finished) given that somebody is in the first position in the system.</p>

<p>\[P (departure) = ¬µh\]</p>

<h3 id="toc_12">State (rate) transition diagram for M/M/1</h3>

<p>Consider a M/M/1 system at steady state (i.e. Equilibrium). Such a system will have a variable number of customers. In particular, at any point of time, a customer may be added to the system through an arrival event, or a customer may be removed from the system due to a departure event.  </p>

<p>Consider the state of the system when exactly &quot;n&quot; customers are in the system. We denote such a state by \(S_n\). If we can figure out how to calculate the generalized probability \(S_n\) that the system will have &quot;n&quot; customers in the Queue. This will allow us to plug any number for n=0,1,2... and get the probability of how many customers are in the Queue.  </p>

<p>Now assume that the system at a given instant is in state \(S_n\). What factors can lead the system to be in such a state \(S_n\) ?  </p>

<p>There are three ways which will result into the system moving into state \(S_n\)<br/>
1. The system was in the state \(S_{n-1}\) and arrival happened. The probability of that happening is \(\lambda h\). We derived that earlier.<br/>
2. The system was in the state \(S_{n+1}\) and a departure happened because a customer was serviced. The probability of that happening is \(\mu h\).<br/>
3. The system was in the state \(S_n\) and neither an arrival nor departure happened. The probability of that happening is \(1-(\lambda h + \mu h)\). (If the probability of arrival or departure happening is \(\lambda h+\mu h\) then not happening is \(1-(\lambda h + \mu h)\)).  </p>

<p><img src="media/15255378723707/15255406029545.jpg" alt=""/></p>

<p>The above diagram shows the transitions. Solid arrows denote the transitions that result into entering state \(S_n\). As you may have noticed that we did not consider the possibility of an arrival and a departure happening in the same interval &quot;h&quot;.</p>

<p>From the above diagram, we can derive the following relationship:</p>

<p>Probability of the system in state \(S_n\) = &quot;Probability that the system is in \(S_{n-1}\) and one arrival happens&quot; or &quot;Probability that the system is in \(S_{n+1}\) and one departure happens&quot; or &quot;Probability that the system is in \(S_{n}\) and no arrival or departure happens&quot;.  </p>

<p>Mathematically we can write the above as<br/><br/>
\[P(S_n)=\lambda h P(S_{n-1})+\mu h P(S_{n+1})+(1-(\lambda h + \mu h))P(S_n)\]<br/>
After rearranging terms, we get<br/>
\[\mu P(S_{n+1}) - \lambda P(S_{n-1})\]<br/>
\[P(S_{n+1})=(1+\rho)P(S_n)-\rho P(S_{n-1})\ (Dividing \ by\ \mu and substituting\ \frac{\lambda}{\mu}=\rho)\]<br/>
One thing to note is that for state \(S_0\) i.e. state when there are no customers (n=0) in the Queue is a special state as there is no that \(S_{0-1}\)</p>

<p>With that consideration, we get following from above equations after removing \(S_{0-1}\) and also the fact that if there are 0 people in the Queue then we don&#39;t have to worry about the fact of something getting serviced as there are 0 people in the Queue. therefore,no one will be serviced if there is 0 people in the queue.<br/>
\[P(S_0)=\mu h P(S_1)+(1-\lambda h)P(S_0)\]<br/>
\[P(S_0)=\mu h P(S_1)+P(S_0)- \lambda h P(S_0)\]<br/>
\[\lambda P(S_0) = \mu P(S_1)\]<br/>
\[P(S_1)=(\frac{\lambda}{\mu})P(S_0) =&gt; \rho P(S_0)\]</p>

<p>Now we have a basic relationship on how state \(S_1\) is dependent on state \(S_0\). Similarly, we can say that <br/>
\[P(S_2)=\rho P(S_1) =&gt; \rho ^2 P(S_0)\]<br/>
\[P(S_3)=\rho P(S_2) =&gt; \rho ^2 P(S_0)\]</p>

<p>This can be generalized by saying<br/>
\[P(S_n) = \rho ^ n P(S_0) \ \ \ \ \  (Equation 4)\]</p>

<p>We see that how every state \(S_n\) can be expressed in terms of basic state \(S_0\). We also know that the overall probability of all the state must be added up to 1, we can say that<br/>
\[P(S_0)+\rho ^ 1 P(S_0)+\rho ^ 2 P(S_0)+\rho ^ 3 P(S_0)+... = 1\]<br/>
\[P(S_0)(1+\rho^1+\rho2+\rho^3+...)=1\]</p>

<p>You can see how \((1+\rho^1+\rho2+\rho^3+...)\) is an infinite geometric series from which will get reduced to<br/>
\[(1+\rho^1+\rho2+\rho^3+...)=\frac{1}{1-\rho} \ \ \ \ (Equation\ 5)\] <br/>
Applying equation 5, we get<br/>
\[<br/>
P(S_0)\frac{1}{1-\rho} = 1 \\<br/>
P(S_0)=1-\rho \ \ \ \ (Equation\ 6) <br/>
\]<br/>
Substituting \(P(S_0)\) results from equation 6 back into equation 4, we get<br/>
\[<br/>
P(S_n)= \rho^{n}(1-\rho) \ \ \ ¬†\ (Equation\ 7)<br/>
\]</p>

<h3 id="toc_13">Average number of customer in an M/M/1 System</h3>

<p>Now we are ready to compute the average number of customers in an M/M/1 system. The total number of customers in the system (q) can be given by the sum of the number of customers and their respective probability.<br/><br/>
\[q=\sum^{n=infinity}_{n=0}{nP(S_n)}\]<br/>
Applying equation 4 and taking \(\rho P(S_0)\) out<br/>
\[q=\sum^{n=infinity}_{n=0}{nP(S_n)}\rightarrow \sum^{n=infinity}_{n=0}{n \rho ^ n P(S_0)} \rightarrow \sum^{n=infinity}_{n=0}{n \rho ^ {n-1}}\]<br/>
We know that from calculus that \(\frac{d}{d\rho}\rho ^ n = n \rho^{n-1} \) and applying sum rule<br/>
\[<br/>
q = \rho P(S_0)\sum^{n=infinity}_{n=0}\frac{d}{d\rho}\rho^n \rightarrow \rho P(S_0) \frac{d}{d\rho}\sum^{n=infinity}_{n=0}{\rho^n}<br/>
\] <br/>
We know that \(P(S_0) = 1 - \rho \) from equation 6, substituting that for \(P(S_0)\) and equation 5 for geometric series<br/>
\[<br/>
q = \rho P(S_0)\frac{d}{d\rho}\frac{1}{1-\rho} \rightarrow \rho(1-\rho)\frac{1}{(1-\rho)^2}<br/>
\]<br/>
We know that \(\rho=\frac{\lambda}{\mu}\), substituting that for \(\rho\) we get<br/><br/>
\(q=\frac{\rho}{1-\rho} \rightarrow \frac{\lambda}{\mu- \lambda}\) (Equation 8)</p>

<h3 id="toc_14">Average number of customers waiting for service in a M/M/1 system</h3>

<p>We know that q = w + œÅ. Thus<br/>
\[W=q-p\rightarrow \frac{\rho}{1-\rho} - \rho \rightarrow \frac{\rho^2}{1-\rho}\]</p>

<h3 id="toc_15">Average time in a M/M/1 system</h3>

<p>Earlier we saw that using Little&#39;S formula  we can say \(q=\lambda T_q\) (Equation 1). Which means<br/>
\[<br/>
T_q = q/\lambda \rightarrow \frac{\lambda}{\mu-\lambda} \rightarrow \frac{1}{\mu- \lambda}<br/>
\]<br/>
by applying equation 8.<br/><br/>
So now we have a way to calculate the average time a customer waits in an M/M/1 queuing system with infinite buffer. We could use this to figure out average delay which a packet may experience on a link by Modeling a Router (store and forward) as M/M/1 Queue.</p>

<p>But the next question comes to mind is that in the real world we know that routers don‚Äôt have infinite buffers. In that case, if we want we could model Router‚Äôs with finite buffer as M/M/1/c Queuing system where  the ‚Äúc‚Äù is the length of the buffers (or Queue size) and derive the equations for getting an average time for an M/M/1/c system.</p>

<p>But before you think ‚ÄúOh gosh another proof and formula‚Äù, it turns out that an Infinite buffer model is a good approximation of finite buffer systems so we will skip that.</p>

<h3 id="toc_16">Networks of M/M/1 Queues:</h3>

<p><img src="media/15255378723707/15255438811801.jpg" alt=""/></p>

<p>Assuming that we are modeling Routers as an M/M/1 Queueing system, we know that every router is connected to each other (like Tandem Queues) where traffic enters multiple queues, exits multiple queues, traffic streams merge or split repeatedly. This fact presents the challenge that once packets have passed the first M/M/1 Queue, are there inter-arrivals still random on the next Queue or they become strongly correlated? Because if they are not random anymore then this will invalidate the Queueing models based on Poisson arrival.</p>

<p>It turns out that a very smart person (Leonard Kleinrock) observed and resolved the problem by introducing the Klein rock independence assumption. It turns out due to the effect of multiple streams merging and splitting at hops, then it restores the Randomness of Inter arrival property, hence making assuming Poisson arrival for packets as a valid assumption.</p>

<p>(Added a video link of him in References which I thought was fascinating. He did his PHD under Claude Shannon)</p>

<h3 id="toc_17">Average Network Delay:</h3>

<p>We can approximate average network delay of a network that consists of more than one link in which traffic feeds from one link into another, by assuming each link behaving as an independent M/M/1 system.  </p>

<p>Consider, for link l=1,2,3...L in a network, the packet arrival rate at link is given by \(\lambda _ l\) which will is expressed in terms of packets per seconds(PPS). Assuming the link capacity is \(c_l\), we can find the service rate \(\mu_l\) for that link by \(\mu_l=\frac{c_l}{average\ packet\ size}\).</p>

<p>For example, if the link is 1Mbps(1,000,000bps) and average packet size is 500bytes(4,000bits), this gives us the service rate \(\mu_l = \frac{1Mbps}{500bytes}=250pps\)</p>

<p>Also assume that on that 1Mbps link we have 800kbps of traffic then we can say the arrival rate on that link \(\mu_l = \frac{Bandwidth}{average\ packet\ size}=\frac{800,000}{4,000}=200pps\)</p>

<p>So we can derive the average number of packets \(N_l=\frac{\lambda_l}{\mu_l - \lambda_l}\) in a queue (equation 8).</p>

<p>If we sum the average number of packets for all links, we get the average number of packets in the network.<br/>
\[<br/>
N=\sum^{L}_{l=1}{N_l}=\sum^{L}_{l=1}{\frac{\lambda_l}{\mu_l- \lambda_l}}<br/>
\]</p>

<p>Now if we know the total amount of the traffic or demand entering into the network, then let&#39;s call it H then by applying Little&#39;s law over the network we can say that \(N=HT\) (From equation 1).</p>

<p>This give us<br/>
\[<br/>
T=\frac{N}{H}=(\frac{1}{h}\sum^{L}_{l=1}{\frac{\lambda_l}{\mu_l- \lambda_l}})<br/>
\]</p>

<h3 id="toc_18">Example:</h3>

<p>Now let‚Äôs try to apply what all we have learned so far with an example. Assume that we have this network topology.</p>

<p><img src="media/15255378723707/15255445537342.jpg" alt=""/></p>

<p>All links are of 1 Gbps capacity for simplicity. In reality we can have a capacity matrix giving us the capacity of each link. We assume that the average packet size in this network is 600 Bytes (4800 bits).  </p>

<p>We can derive the service rate for a link = \(\frac{Link\ capacity}{Avg\ Packet\ Size}=\frac{1,000,000,000}{4,800}=208,333 pps\)</p>

<p>In our case this will be the Service Rate for every link as we are assuming same link capacity and average packet size. We also have the below Routing matrix for this topology which tells us how traffic is routed between the Nodes.</p>

<p><strong>Routing Matrix:</strong>  </p>

<p><img src="media/15255378723707/15255446516674.jpg" alt=""/></p>

<p>We can look at the Routing Matrix and the Traffic Demand Matrix of the network to derive the aggregate demand for each link in the network. For Instance, from Routing matrix we know that the link ‚ÄúAB‚Äù will carry traffic for the demands for ‚ÄúAB‚Äù, ‚ÄúABC‚Äù, ‚ÄúABF‚Äù and ‚ÄúABFD‚Äù.</p>

<p>Let‚Äôs say we had a Traffic Demand matrix and after combining with the Routing matrix, we came up with the below Aggregate Traffic Demand matrix for the links, this gives us the Arrival rate for each link.</p>

<p><strong>Aggregate Traffic in PPS(Mbps) derived from Routing table.</strong><br/><br/>
<img src="media/15255378723707/15255446847256.jpg" alt=""/><br/>
Total Arrival Rate is equal to the sum of the arrival rate on all the links which we get from the above table<br/><br/>
\[\sum{\lambda_l} = 2,500,000\ pps\]<br/>
To keep it simple, The below table shows the calculations only in one way like from Link A-&gt;B but not from B-&gt;A. Later we will just double the final numbers to account for the other direction.<br/><br/>
<img src="media/15255378723707/15255447347725.jpg" alt=""/></p>

<p>Average Network Delay where total Arrival Rate in the Network \(H=2,500,000pps\)<br/>
\[T(Average\ Delay)=(\frac{1}{H})\sum^{L}{l=1}{\frac{\lambda_l}{\mu_l- \lambda_l}}=\frac{1}{2,500,000}\sum^{L}{l=1}{\frac{39 \times 2 }{2,500,000}}=31.2\mu\ sec\]</p>

<h2 id="toc_19">Conclusion:</h2>

<p>We started with the basic of Queuing theory, then we derived some equations for the key parameters for the M/M/1 Queueing system. Then we looked at how the M/M/1 Queuing system can be applied to Network and ended with an example.</p>

<p>We could have just looked at the final formula without going through the derivation, but my goal is to show how it‚Äôs derived because that is always not stated clearly in books.It also helps in building an understanding of the assumptions behind derived equations. Once you have developed an understanding/intuition, I do not think you have to remember the details. I hope some of you will find this useful.  </p>

<p>I was initially thinking of covering below questions but decided to leave it to you:</p>

<ul>
<li>Whether Poisson traffic is the right model for traffic arrival?</li>
<li>Is M/M/1 Queuing system the right way to model the Routers? Or we should have looked at some Queuing systems like M/G/1 where service rate distribution is modeled as a generalized distribution?

<ul>
<li>If yes, then how can we find an average network delay in those cases.</li>
</ul></li>
</ul>

<h2 id="toc_20">Useful links and References:</h2>

<ul>
<li>Khan Academy Poisson Process Introduction
<ul>
<li><a href="https://www.youtube.com/watch?v=3z-M6sbGIZ0">https://www.youtube.com/watch?v=3z-M6sbGIZ0</a></li>
<li><a href="https://www.youtube.com/watch?v=Jkr4FSrNEVY">https://www.youtube.com/watch?v=Jkr4FSrNEVY</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/playlist?list=PL7A02833F8478FF87">Advanced Operations Research by Prof. G.Srinivasan</a></li>
<li>Exponential Process Introduction <a href="https://www.youtube.com/watch?v=bKkLYSi5XNE">https://www.youtube.com/watch?v=bKkLYSi5XNE</a></li>
<li>Queuing and Loss Simulation: <a href="http://www.ccs-labs.org/teaching/rn/animations/queue/">http://www.ccs-labs.org/teaching/rn/animations/queue/</a></li>
<li>Leonard Kleinrock: <a href="https://www.youtube.com/watch?v=qsgrtrwydjw">https://www.youtube.com/watch?v=qsgrtrwydjw</a></li>
<li><a href="https://www.amazon.com/Network-Routing-Second-Algorithms-Architectures/dp/0128007370">Network Routing, Second Edition: Algorithms, Protocols, and Architectures (The Morgan Kaufmann Series in Networking)</a></li>
<li><a href="https://www.amazon.com/High-Performance-Data-Network-Design/dp/1555582079">High Performance Data Network Design: Design Techniques and Tools</a></li>
<li><a href="https://www.amazon.com/Queueing-Modelling-Fundamentals-Applications-Communication/dp/0470519576">Queueing Modelling Fundamentals: With Applications in Communication Networks</a></li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/5/5</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Network.html'>Network</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="Anime%20Review:%20High%20School%20Fleet.html">
                
                  <h1>Review: High School Fleet</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p><strong>Overall rating: 9</strong><br/>
<em>This review will contain spoilers in regards to some of the main plot points of the show. You have been warned!</em><br/>
<img src="media/15183567008391/15183571126103.jpg" alt=""/></p>

<p>Wait a moment. High School Fleet? You mean to tell me, there is yet ANOTHER anime with girls and warships?  I have no idea how this slipped past my attention, but it seems to be Girls und Panzer-esque, except in warships instead of tanks. So being a fan of the likes of <a href="https://kitsu.io/anime/aoki-hagane-no-arpeggio-ars-nova">Apreggio of Blue Steel</a>, <a href="https://kitsu.io/anime/kantai-collection">Kantai Collection</a>, and the aforementioned Girls und Panzer there was no way in hell I was not going to watch this.   </p>

<p>I honestly came expecting a anime where cute girls do cute things , but I was surprised by the way it ended up being and honestly it surpassed my expectations. And I&#39;m glad that is not slice of life show that I was expecting because that made it even more interesting.   </p>

<p>The series starts off quickly and reveals that a girl named Akeno Misaki (nicknamed ‚ÄúMike‚Äù) with a big dream. She enrolls at an academy known as ‚ÄúYokosuka Girls&#39; Marine High School‚Äù with the goal to join the Blue Mermaids. For the first episode, the show establishes that Akeno and her crew faces unexpected circumstances as they are accused of mutiny. Furthermore, Akeno becomes the captain of the destroyer ship Harekaze. Make no mistake though, the show has a rather serious vibe despite the misleading atmosphere. The crew faces against battleships armed with real firepower capable of destroying them. Furthermore, Akeno is a newbie with lack of experience and tries hard to earn the respect of her crew. In essence, the show makes it clear that it‚Äôs no joke and pushes the idea of naval warfare to a level that you may not be prepared for.</p>

<p>As for the characters, individually, they don‚Äôt appear to be all that special, but as a whole, the cast turned out to be pretty decent.<br/>
<img src="media/15183567008391/15183590110883.jpg" alt=""/></p>

<p><em>(from left to right) Mei, Shima, Kouko, Wilhelmina, Rin, Mike, Isoroku, Mashiro, Akane, Homare, Maron, and Kaede</em><br/>
‚ÄúDecent‚Äù is probably the best compliment I can come up with for Mike, who‚Äôs one of those protagonists that I generally don‚Äôt enjoy very much. She‚Äôs your every girl who winds up being the captain of the Harekaze, a smaller ship that‚Äôs home to a ragtag group of girls that weren‚Äôt thought of very highly. At times, she‚Äôs pretty inept in her leadership role, with Mashiro being much more fitting for the role of captain, yet this was one of those instances where a bland character gets outshined by several girls with lesser roles.  </p>

<p>Among the crew, there is a variety of characters. One thought that crossed my mind is how the show can fit characterization with so many. After all, introducing all the girls at once seems like a mistake because there‚Äôs nothing in particular that makes them stand out individually besides the main protagonists. Most of them seems to have generic characteristics as well ranging from being stubborn, class clown, nervousness, etc. It‚Äôs also hard to ignore the similarities between this and Girls und Panzer especially with how talent is developed from both series. In some ways, the show does a neat job at making each episode relevant with its premise. In other ways, I have to say that the character cast is perhaps just too big for its own good. </p>

<p><img src="media/15183567008391/15183599783831.jpg" alt=""/><br/>
Wilhelmina immediately comes to mind, as the German beauty eventually finds herself aboard the Harekaze after the shit hits the fan on board her own ship. If I could‚Äôve had my way, I would‚Äôve traded Mike for Wilhelmina, with Mashiro assuming the role of captain of the Harekaze, but that would‚Äôve made too much sense.  üòõ<br/>
<img src="media/15183567008391/15183600577029.jpg" alt=""/><br/>
Maron and Kouko also left favorable impressions, and while Kouko had plenty of brief moments throughout the series, Episode 10 saw Maron shine as the person in charge of the Equator Festival. That was mostly a filler episode that gave us a lot of slice of life moments, yet it was fun nevertheless, thanks in large part to Maron. Oh, and there‚Äôs a cat that I liked better than some of the characters‚Ä¶  üòÄ</p>

<p>Either way, you‚Äôll probably find some characters from the series to be more noticeable than others. Besides Akeno, we have Mashiro Munetani, the deputy captain of Harekaze. Unlike Akeno, she seems more like the serious type that takes everything a bit too straightforward and even has a case of allurophobia. Then, there‚Äôs quiet girls like Shima Tateishi with elite gunning skills, Mei Irizaki with her passion to fight, Kouka Nosa with a theoretical mind, and timid Rin Shiretoko with decent steering abilities. They make up the bulk of the characters‚Äô screen time so keep in mind while watching their roles. What I also find insightful about the show is that it divides the Blue Mermaid crew well with division to make each of them unique. For instance, there‚Äôs the Bridge of the crew with their central command objectives, the combat unit with their fighting talents, navigation division with their abilities to navigate under any circumstance, engineering department for construct and repair, and Logistics for aid in operations. The point is that the show doesn‚Äôt neglect any part of the Blue Mermaid crew and makes each role important to ensure the team‚Äôs success. On the downside, there isn‚Äôt much concrete characterization. The sheer amount of characters for this one cour show just seems a bit too much and perhaps the most characterization we‚Äôll get is between Akeno‚Äôs childhood with her friend.  </p>

<p>Between the story and the slice of life feeling, High School Fleet feels more like a marine school/military hybrid adventure. The show makes it clear that Blue Mermaid is in danger at times especially when combating other ships (the most prominent one being the infamous Musashi). At other times, it feels like a school floating on water. This is because of the inner storytelling that goes inside the ship with the girls living their dream job. They want to have fun while working so on occasions, there will emerge ‚Äúbreather‚Äù episodes to show their lifestyle. At other times, they must be prepared for what‚Äôs ahead. That is, one particular part of the story baffles me with the way it‚Äôs executed when it involves peculiar experimentations. I‚Äôm all in for surprises but that took me by storm, almost like the way that Akeno is taken by her unexpected role. For some, this could drive away viewers from further pursuing the series but for others, it may also spark more interest. In retrospect, High School Fleet is one of those shows that you‚Äôll have to expect the unexpected.   </p>

<p>It‚Äôs an anime original first and produced by TMS Entertainment. For artwork standards, it‚Äôs fairly well done in terms of ship designs. This is important because it gives more viewers interest to see how they work. I‚Äôm also impressed by the way Harekaze is designed with its 12.7 cm/50 Type 3 naval gun turrets and MK 16 naval guns. The 5&quot;/54 caliber Mark 16 and Mark 37 also looks surprisingly realistic. In terms of character designs, it‚Äôs generally moderate with a decent effort and budget poured towards making the girls look adorable and professional. Remember, there are at least 30 girls on just one ship alone! Like most shows that takes almost exclusively at sea, expect fan service with an even inevitable ‚Äúbeach episode‚Äù. However, the show itself excels the most at combat choreography. Even the night battles gives a strong impression of what naval warfare about. And in essence, the series knows how to expand its limits to make the fights believable. </p>

<p>The ships are really well animated and they do feel like the girls are on board a real ship with all of its related equipment and weapons. Explosions are also eye candy and pairs well with the sound effects. The ships move realistically, shakes and rides the waves like a ship would. The water animation is of note as well and makes you feel like they are at sea. If you just came for the battles and fights, you‚Äôll be pleased as the weapons are also fairly well animated (torpedoes especially). If you came for the cute girls then you won‚Äôt be disappointed either. 31 cuties each with a different style to match their persona and all of them will leave at least some impressionable image in your mind. Although for some reason, it might just be me, but the ships seems to be in a higher resolution than the characters sometimes. However, it‚Äôs nothing too significant that can affect the enjoyment of the show.  </p>

<p>High School Fleet makes extensive use of CG, which is sure to turn off some people. I don‚Äôt think I‚Äôm one to immediately dismiss an anime that‚Äôs heavy on CG, but I‚Äôm unsure how I feel about it here. There are times when it genuinely looks pretty good and you know that a traditional hand-drawn style probably wouldn‚Äôt have resulted in the same visual quality, yet there are other times where it just looks so garish and awkward. For me, it wasn‚Äôt a deal-breaker or anything, but apart from the CG, this was a decent-looking show that I can‚Äôt fault too much. When it comes to the sound, I don‚Äôt think HSF is all that exceptional in this regard, but it gets the job done with some reasonably solid music that‚Äîwhile not being overly memorable‚Äîdoesn‚Äôt exactly feel subpar. Overall, I think that the production values are more than sufficient, which is a pretty good word to describe this anime as a whole.</p>

<p>On the subject of soundtrack, the show is crisp and knows what it‚Äôs doing most of the time. This is especially true for the intense battle orchestrated OST that really gets the adrenaline pumping. Character voices are also accurately portrayed to reflect their personalities and expressions. Remember, these girls are practically part of the military so it‚Äôs interesting to see how they react under extreme circumstances. The voice mannerism does just that. OP and ED theme songs are catchy as well that gives the marine vibes and cool atmospheric feeling.   </p>

<p>OP is catchy and gets stuck in your head, ED is soft and calming. Both fits the theme of the sea very well. The sound track during the anime isn‚Äôt used to fill the silence but rather used to great effect adding lots of tension to the scenes. Those sound tracks can really get your heart racing during the fight scenes and your heart throbbing in some of the more emotional scenes, and trust me, the feels will hit you like a truck. Other sounds worth mentioning is the sound effects which are pretty good. You can hear the whistle of the shell getting louder as it get nearer to the ship, the heavy explosion during impact, the creaking of the ship under stress, the echo of detonations of torpedoes in the water and the list just goes on. All these sound effect adds more excitement, tension and action to the scenes and boy they feel satisfying.</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/2/11</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Review.html'>Review</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15171319125987.html">
                
                  <h1>Wipe Out Aliyun Server Guard Agent</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">Why NOT simply do reinstall via panel?</h2>

<p>Server Guard Agent (SGA) is installed by default and Aliyun has an <a href="https://www.alibabacloud.com/help/doc-detail/31777.htm?spm=a3c0i.o31778en.b99.10.11511e0bKvNdEk">official uninstall guide</a>.</p>

<p>However, after uninstalling SGA, your VM still <a href="https://fuuko.net/15147462575972.html">trying connecting SGA remote and uploading encrypted data</a>.  </p>

<p>After blocked all IPs of SGA service, <a href="https://fuuko.net/15147362575182.html">an unknown key inserted in my .ssh/ directory</a>. I opened a ticket, they told me &quot;you were hacked&quot;. And I found <a href="https://fuuko.net/15147672575905.html">my sshd binary file was modified</a>.  </p>

<p>So we will enable full system encryption to make VMs hosted by a provider which cannot be trusted invulnerable.</p>

<h2 id="toc_1">Prepare your VM</h2>

<p>You‚Äôll install your custom distro onto a raw disk, with the direct disk boot option. The end result will be a working custom install; however, it will not support disk resizing from within the official panel, nor will it be compatible with the official backup service.<br/><br/>
1. Create two raw, unformatted disk images. Can be done with Aliyun Console.<br/>
2. Create two configuration profiles.</p>

<p>Installer profile</p>

<pre><code>Label: Installer
Kernel: Direct Disk
/dev/sda: Boot disk image.
/dev/sdb: Installer disk image.
root / boot device: Standard /dev/sdb
</code></pre>

<p>Boot profile</p>

<pre><code>Label: Boot
Kernel: Direct Disk
/dev/sda: Boot disk image.
root / boot device: Standard /dev/sda
</code></pre>

<h2 id="toc_2">Download and Install Image</h2>

<ol>
<li>Boot into Rescue Mode with your Installer disk mounted to /dev/sda, and connect to your VM using the Aliyun Console.</li>
<li>Once in Rescue Mode, download your installation media and copy it to your Installer disk. In this example we‚Äôre using the Ubuntu net installer.</li>
</ol>

<pre><code class="language-bash">wget http://mirror.pnl.gov/releases/xenial/ubuntu-16.04.3-server-amd64.iso
dd if=mini.iso of=/dev/sda
</code></pre>

<ol>
<li>Reboot into your Installer configuration profile</li>
<li>During your installer‚Äôs partitioning/installation phase, be sure to instruct it to use the /dev/sda volume and <strong>enable full system encryption</strong>.</li>
<li>Once the installation completes, reboot into your Boot profile and open the console. You will have access to your VM.</li>
</ol>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/1/11</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Network.html'>Network</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15147262575972.html">
                
                  <h1>Difference between OpenVZ and LXC</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">Background: What‚Äôs a container?</h2>

<p>Containers have been around for over 15 years, so why is there an influx of attention for containers? As compute hardware architectures become more elastic, potent, and dense, it becomes possible to run many applications at scale while lowering TCO, eliminating the redundant Kernel and Guest OS code typically used in a hypervisor-based deployment. This is attractive enough but also has benefits such as eliminating performance penalties, increase visibility and decrease difficulty of debug and management.</p>

<p>Because containers share the host kernel, binaries and libraries, can be packed even denser than typical hypervisor environments can pack VM‚Äôs.</p>

<h2 id="toc_1">OpenVZ</h2>

<p>OpenVZ is a Linux container solution. It was first released in 2005 by SWSoft, now known as Parallels. Though connected to a private, proprietary company, OpenVZ is open source and available for free.</p>

<p>The previously mentioned container projects have been related to BSD. One fundamental difference between BSD and Linux is that Linux is technically just a kernel. All of the tools that make Linux functional are supplemental and from different projects. For example, the chroot command in Ubuntu Linux comes from the GNU coreutils project.</p>

<p>This distinction between BSD and Linux is quite important in the case of OpenVZ. Because containers require kernel level access, the container code needs to be integrated into the kernel. OpenVZ only released its code as a set of patches and custom-compiled Linux kernels they initially never bothered to get their code into the official Linux kernel.</p>

<p>As explained in a recent OpenVZ blog entry, this was a mistake recognized way back in 2005, and the OpenVZ team has been working to get their code integrated into the main Linux kernel since then. This can sometimes be a very slow and painful process. The Xen project went through the same scenario.</p>

<p>OpenVZ has never really gained widespread acceptance in the Linux community. This is unfortunate since it is a very robust project with a large amount of features.</p>

<h1 id="toc_2">LXC</h1>

<p>Finally, there is LXC. Well, before we get into LXC, let us talk about Linux Namespaces. A namespace is another term for segregation. Items in different namespaces are unable to collide or conflict with each other. Chroot can be thought of as a simple filesystem namespace.</p>

<p>As we have seen with all the other container projects, they implement features beyond filesystem segregation: users, processes, and the network are all also segregated.</p>

<p>Starting in 2001, the Linux kernel began supporting a series of namespaces. The first was mount namespaces, which can be thought of as an enhanced filesystem namespace. Since then, Linux has added support for UTS, IPC, PID, user, and network namespaces. This article goes into great detail about each of them.</p>

<p>Next, a quick mention about control groups otherwise known as cgroups. Cgroups limit the amount of resources a certain process can use. For example, a process could be limited to use just 50% of the total CPU on the server.</p>

<p>Between namespaces and cgroups, the Linux kernel has everything it needs to support a modern container system. And that is exactly what LXC is a collection of utilities that interact with namespaces and cgroups.</p>

<p>So, since LXC uses features native to the Linux kernel, this should make it a better choice over OpenVZ, right? I guess that depends on one&#39;s opinion of those features.</p>

<p>The Linux namespace and cgroup code is still in development. For example, user namespaces were only finalized a few months ago. Shortly after, they were found to be heavily exploitable.</p>

<p>Security in general is a very subjective and relational topic: what one person is paranoid of can be of no matter to another person. Security has always been a hot topic with LXC. Here are several different articles on the subject.</p>

<p>This part of the series summarized various existing container solutions. You might have noticed the added detail for the Linux-based solutions especially LXC.</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/12/31</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Network.html'>Network</a></span>
          				   
                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="all_1.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="https://fuuko.net/avatar.jpg" /></div>
            
                <h1>Fuuko's Lab</h1>
                <div class="site-des">Free is never free.</div>
                <div class="social">








<a target="_blank" class="twitter" target="_blank" href="https://twitter.com/realFuuko" title="Twitter">Twitter</a>

<a target="_blank" class="email" href="mailto:hampus[@]back.re" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="Material.html"><strong>Material</strong></a>
        
            <a href="Network.html"><strong>Network</strong></a>
        
            <a href="Offtopics.html"><strong>Offtopics</strong></a>
        
            <a href="Review.html"><strong>Review</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15255378723707.html">AND (Average Network Delay) and Queuing Theory Basics</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="Anime%20Review:%20High%20School%20Fleet.html">Review: High School Fleet</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15171319125987.html">Wipe Out Aliyun Server Guard Agent</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15147262575972.html">Difference between OpenVZ and LXC</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15139994534279.html">BitTorrent Traffic Detection with Deep Flow Inspection</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2017
Hosted by <a target="_blank" href="https://aws.amazon.com">Amazon Web Service</a> 
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>


  </body>
</html>
